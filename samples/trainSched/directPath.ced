'/bootstrap':signature(arrayElement(Array,Elem)::'/javascript/statepred':statePred,[Array::'/javascript/jsLogic':jsExpr,Elem::'/javascript/jsLogic':jsExpr]).
'/bootstrap':projection(arrayElement(Array,Elem)::'/javascript/statepred':statePred,'/bootstrap':horiz(['/bootstrap':vis(Elem::'/javascript/jsLogic':jsExpr),'/bootstrap':label(!'is an element in'),'/bootstrap':vis(Array::'/javascript/jsLogic':jsExpr)])).
'/javascript/jsLogic':procedure('/javascript/statepred':whenever(arrayElement(Array,Elem),Action,Finally),'/javascript/jsLogic':jsCommand(['/javascript':var(I,'/javascript':const(0)),'/javascript':while('/javascript':op('/javascript':varExpr(I),'/javascript':lt,'/javascript':dot('/javascript/jsLogic':inlineTerm(Array::'/javascript/jsLogic':jsExpr),!length)),['/javascript/jsLogic':runProcedure('/javascript/jsLogic':foreach(Elem::'/javascript/jsLogic':jsExpr='/javascript/jsLogic':jsExpr('/javascript':arrayElement('/javascript/jsLogic':inlineTerm(Array::'/javascript/jsLogic':jsExpr),'/javascript':varExpr(I)))::'/javascript/jsLogic':jsExpr,'/javascript/jsLogic':jsCommand(['/javascript/jsLogic':runProcedure('/javascript/jsLogic':do(Action))]))),'/javascript':assign('/javascript':varExpr(I),'/javascript':op('/javascript':varExpr(I),'/javascript':plus,'/javascript':const(1)))]),'/javascript/jsLogic':runProcedure('/javascript/jsLogic':do(Finally))])).
'/bootstrap':signature(extractLocationAndTime(Destination,Location,Time)::'/javascript/statepred':statePred,[Destination::'/javascript/jsLogic':jsExpr,Location::'/bootstrap':string,Time::'/bootstrap':number]).
'/javascript/jsLogic':procedure('/javascript/statepred':whenever(extractLocationAndTime(Destination,Location,Time),Action,Finally),'/javascript/jsLogic':jsCommand(['/javascript':var(LocationPrime,'/javascript':arrayElement('/javascript/jsLogic':inlineTerm(Destination::'/javascript/jsLogic':jsExpr),'/javascript':const(0))),'/javascript':var(TimePrime,'/javascript':arrayElement('/javascript/jsLogic':inlineTerm(Destination::'/javascript/jsLogic':jsExpr),'/javascript':const(1))),'/javascript/jsLogic':runProcedure('/javascript/jsLogic':foreach((Location::'/bootstrap':string='/javascript/jsLogic':jsExpr('/javascript':varExpr(LocationPrime))::'/bootstrap':string,Time::'/bootstrap':number='/javascript/jsLogic':jsExpr('/javascript':varExpr(TimePrime))::'/bootstrap':number),Action)),'/javascript/jsLogic':runProcedure('/javascript/jsLogic':do(Finally))])).
annotation:shrink('/bootstrap':signature(directPath(Location1,DayTime1,Location2,DayTime2,Train,Deadline)::'/javascript/statepred':statePred,[Location1::'/bootstrap':string,DayTime1::dayTime,Location2::'/bootstrap':string,DayTime2::dayTime,Train::'/bootstrap':string,Deadline::'/bootstrap':number])).
annotation:shrink('/bootstrap':projection(directPath(Location1,DayTime1,Location2,DayTime2,Train,Deadline)::'/javascript/statepred':statePred,'/bootstrap':horiz(['/bootstrap':label(!'direct path from'),'/bootstrap':vis(Location1::'/bootstrap':string),'/bootstrap':label(!'at time'),'/bootstrap':vis(DayTime1::dayTime),'/bootstrap':label(!to),'/bootstrap':vis(Location2::'/bootstrap':string),'/bootstrap':label(!'at time'),'/bootstrap':vis(DayTime2::dayTime),'/bootstrap':label(!'on train'),'/bootstrap':vis(Train::'/bootstrap':string),'/bootstrap':label(!'with deadline'),'/bootstrap':vis(Deadline::'/bootstrap':number)]))).
annotation:shrink('/javascript/statepred':clause(directPath(Location1,DayTime1,Location2,DayTime2,Train,Deadline),'/javascript/statepred':if('/javascript/statepred':pred((\+builtin:var(Location1::'/bootstrap':string),\+builtin:var(DayTime1::dayTime))),'/javascript/statepred':conj('/javascript/statepred':pred('/Functional':eval(dayTimeInMinutes(DayTime1),'/bootstrap':number,Time1)),'/javascript/statepred':conj('/javascript/statepred':stateEval('/cedalionWeb/node':dot('/cedalionWeb/node':json('/cedalionWeb/node':get(annotation:shrink('/javascript/statepred':stateApplyBinOp('/javascript/statepred':expr('/Functional':const(!'http://localhost:5984/trainsched/_design/train/_view/byStation')),'/Functional':concat,'/cedalionWeb/node':urlQuery(annotation:changeMode(['/cedalionWeb/node':arg(!startkey,'/cedalionWeb/node':jsonStringify('/javascript/jsLogic':jsExpr('/javascript':array(['/javascript/jsLogic':inlineTerm(Location1::'/bootstrap':string),'/javascript/jsLogic':inlineTerm(Time1::'/bootstrap':number)])))),'/cedalionWeb/node':arg(!endkey,'/cedalionWeb/node':jsonStringify('/javascript/jsLogic':jsExpr('/javascript':array(['/javascript/jsLogic':inlineTerm(Location1::'/bootstrap':string),'/javascript/jsLogic':inlineTerm(Deadline::'/bootstrap':number)]))))],'/bootstrap':vert)))))),!rows),'/javascript/jsLogic':jsExpr,Rows),'/javascript/statepred':conj(arrayElement(Rows,Row),'/javascript/statepred':conj('/javascript/statepred':stateEval('/cedalionWeb/node':string('/cedalionWeb/node':dot('/cedalionWeb/node':dot('/javascript/statepred':expr('/Functional':const(Row)),!value),!name)),'/bootstrap':string,Train),'/javascript/statepred':conj('/javascript/statepred':stateEval('/cedalionWeb/node':dot('/cedalionWeb/node':dot('/javascript/statepred':expr('/Functional':const(Row)),!value),!stationsTo),'/javascript/jsLogic':jsExpr,StationsTo),'/javascript/statepred':conj(arrayElement(StationsTo,Destination),'/javascript/statepred':conj(extractLocationAndTime(Destination,Location2,Time2),'/javascript/statepred':pred(('/Functional':ge('/Functional':const(Deadline),'/Functional':const(Time2),'/bootstrap':number),minutesToDayTime(Time2,DayTime2)))))))))),'/javascript/statepred':conj('/javascript/statepred':pred('/Functional':eval(dayTimeInMinutes(DayTime2),'/bootstrap':number,Time2)),'/javascript/statepred':conj('/javascript/statepred':tracePred('/javascript/statepred':stateEval('/cedalionWeb/node':dot('/cedalionWeb/node':json('/cedalionWeb/node':get(annotation:shrink('/javascript/statepred':stateApplyBinOp('/javascript/statepred':expr('/Functional':const(!'http://localhost:5984/trainsched/_design/train/_view/byStation')),'/Functional':concat,'/cedalionWeb/node':urlQuery(annotation:changeMode(['/cedalionWeb/node':arg(!startkey,'/cedalionWeb/node':jsonStringify('/javascript/jsLogic':jsExpr('/javascript':array(['/javascript/jsLogic':inlineTerm(Location2::'/bootstrap':string),'/javascript/jsLogic':inlineTerm(Deadline::'/bootstrap':number)])))),'/cedalionWeb/node':arg(!endkey,'/cedalionWeb/node':jsonStringify('/javascript/jsLogic':jsExpr('/javascript':array(['/javascript/jsLogic':inlineTerm(Location2::'/bootstrap':string),'/javascript/jsLogic':inlineTerm(Time2::'/bootstrap':number)]))))],'/bootstrap':vert)))))),!rows),'/javascript/jsLogic':jsExpr,Rows)),'/javascript/statepred':conj(arrayElement(Rows,Row),'/javascript/statepred':conj('/javascript/statepred':tracePred('/javascript/statepred':stateEval('/cedalionWeb/node':string('/cedalionWeb/node':dot('/cedalionWeb/node':dot('/javascript/statepred':expr('/Functional':const(Row)),!value),!name)),'/bootstrap':string,Train)),'/javascript/statepred':conj('/javascript/statepred':stateEval('/cedalionWeb/node':dot('/cedalionWeb/node':dot('/javascript/statepred':expr('/Functional':const(Row)),!value),!stationsFrom),'/javascript/jsLogic':jsExpr,StationsFrom),'/javascript/statepred':conj(arrayElement(StationsFrom,Destination),'/javascript/statepred':conj('/javascript/statepred':tracePred(extractLocationAndTime(Destination,Location1,Time1)),'/javascript/statepred':pred(('/Functional':ge('/Functional':const(Time1),'/Functional':const(Deadline),'/bootstrap':number),minutesToDayTime(Time1,DayTime1))))))))))))).
'/javascript/statepred':unitTest(directPath(!'san francisco',dayTime(monday,time(16,40)),!'new york',_,_,2000)).
'/javascript/statepred':unitTest('/javascript/statepred':conj('/javascript/statepred':stateEval('/javascript/statepred':expr(dayTimeInMinutes(dayTime(monday,time(11,0)))),'/bootstrap':number,Deadline),'/javascript/statepred':tracePred(directPath(!'san francisco',_,!'new york',dayTime(monday,time(16,40)),_,Deadline)))).
'/javascript/statepred':unitTest('/javascript/statepred':not(directPath(!'san francisco',dayTime(monday,time(16,40)),!london,_,_,2000))).
'/bootstrap':defAtom(testPath::'/javascript/jsLogic':procedure).
'/javascript/jsLogic':procedure(testPath,'/javascript/jsLogic':jsCommand(['/javascript/jsLogic':runProcedure('/javascript/statepred':whenever(directPath(!denver,dayTime(monday,time(16,40)),Dest,Time,Train,2000),'/javascript/jsLogic':jsCommand(['/javascript':exprStatement('/javascript':call('/javascript':dot('/javascript':varExpr('/javascript/jsLogic':console),!log),['/javascript':op('/javascript':op('/javascript/jsLogic':inlineTerm(Dest::'/bootstrap':string),'/javascript':plus,'/javascript':str(!' on ')),'/javascript':plus,'/javascript':op('/javascript':op('/javascript':call('/javascript':dot('/javascript':varExpr('/javascript/jsLogic':logic),!termToString),['/javascript/jsLogic':inlineTerm(Time::dayTime)]),'/javascript':plus,'/javascript':str(!' with ')),'/javascript':plus,'/javascript/jsLogic':inlineTerm(Train::'/bootstrap':string)))]))])))])).
